<!-- Fullcalendar.io -->
{{- $isoformat := "2006-01-02T15:04:05Z0700" }}
{{- $end_date := default nil $.Page.Params.params.enddate }}
{{- $view := default nil (.Get 0) }}
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        {{ with $view }}initialView: '{{ . }}',{{ end }}
        themeSystem: 'bootstrap5',
        initialDate: '{{ $.Page.Date.Format $isoformat }}',
        views: {
            dayGrid: {
              displayEventEnd: true
            },
        },
        headerToolbar: {
          left: 'prev,next',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek' // user can switch between the two
        },
        events: [
            {
                title: '{{ $.Page.Title }}',
                {{ with $end_date }}end: '{{ (. | time).Format $isoformat }}',{{ end }}
                start: '{{ $.Page.Date.Format $isoformat }}'

            }
        ]
    });
    calendar.render();
});
</script>
<div class="shadow p-3 my-5 bg-body border rounded">
    <div id='calendar' class='fullcalendar'></div>
</div>
